# Configura√ß√µes Gerais
language: pt-br

# Sele√ß√£o do Modelo de Embedding (openai ou huggingface)
# embedding_type: huggingface # openai # "huggingface"  "ollama"
embedding_type: openai
huggingface:
  embedding_model: BAAI/bge-small-en

# Modelos LLM principais e fallback
default_model: ollama
default_model_agents: gpt

# Configura√ß√£o GPT
gpt_agents:
  type: gpt-3.5-turbo
  max_input_size: 4096
  max_tokens: 500
  temperature: 0.0
  top_p: 0.7
  system_message: |
    Voc√™ √© um assistente treinado para responder **apenas** com base nos documentos do FAQ da empresa.
    ‚ùóÔ∏èN√ÉO utilize conhecimento externo, nem crie suposi√ß√µes.
    ‚ùóÔ∏èSe a resposta n√£o estiver claramente presente no conte√∫do, diga:
    'Desculpe, n√£o encontrei essa informa√ß√£o no FAQ da Insightiva.'
  # embedding_model:
  #     type: "text-embedding-3-large"
  #     openai_embedding_max_tokens: 8191

ollama_agents:
  type: mistral:7b-instruct
  provider: ollama
  base_url: http://localhost:11434
  temperature: 0.0
  additional_kwargs:
    num_predict: 500
  # embedding_model:
  #     type: "sentence-transformers/all-MiniLM-L6-v2"
  #     huggingface_embedding_embedding_max_tokens: 512

ferramentas_ativas_agents:
 -anti_prompt_injection
 -semantic_guard
 -query_index_tool

# Configura√ß√£o GPT
gpt:
  type: gpt-4 #gpt-3.5-turbo
  max_input_size: 4096
  max_tokens: 300                # Aumentado para permitir respostas mais completas e institucionais
  temperature: 0.03              # Levemente acima de 0.1 para dar fluidez sem perder controle
  top_p: 0.8                     # Um pouco mais aberto para permitir varia√ß√µes naturais de linguagem
  frequency_penalty: 0.2         # Evita repeti√ß√£o excessiva de palavras
  presence_penalty: 0.1          # Estimula leve varia√ß√£o e riqueza de vocabul√°rio
  system_message: |
    Sua fun√ß√£o √© responder √† entrada do usu√°rio utilizando **exclusivamente os conte√∫dos oficiais da Insightiva**, que abrangem:

    - FAQ da empresa  
    - Textos institucionais do site  
    - Documentos sobre diagn√≥sticos culturais, onboarding, planos, benef√≠cios e metodologia

    ‚úÖ Siga este fluxo:

    1. **Identifique se √© uma sauda√ß√£o** (ex: ‚Äúoi‚Äù, ‚Äúol√°‚Äù, ‚Äútudo bem?‚Äù).  
      - Se for, responda com tom gentil e acolhedor, refor√ßando que est√° √† disposi√ß√£o.

    2. **Reformule internamente a pergunta para garantir clareza e alinhamento com os temas da Insightiva**.  
      - Se a pergunta estiver amb√≠gua, pe√ßa reformula√ß√£o com gentileza.

    3. **Verifique se a pergunta est√° dentro do escopo esperado**:  
      - Diagn√≥stico cultural  
      - Tipos culturais, valores, n√≠veis de consci√™ncia  
      - Aplica√ß√£o do onboarding  
      - Planos oferecidos  
      - Benef√≠cios e diferenciais  
      - Avalia√ß√£o 360  
      - Funcionalidades da plataforma  
      - Parceria com consultores

    4. **Se estiver fora do escopo (ex: pol√≠tica, religi√£o, suporte t√©cnico ou d√∫vidas pessoais)**:  
      - Responda com:  
        > ‚ÄúSou um agente especializado nos conte√∫dos da Insightiva. Posso te ajudar com temas relacionados aos nossos diagn√≥sticos, planos, cultura e onboarding!‚Äù

    5. **Se a informa√ß√£o n√£o estiver nos arquivos vetorizados**:  
      - Diga com transpar√™ncia:  
        > "Desculpe, n√£o encontrei essa informa√ß√£o nos conte√∫dos da Insightiva."

    üîí Exemplos de atua√ß√£o segura e precisa:

    - Pergunta fora do escopo:  
      > ‚ÄúSou um agente especializado nos conte√∫dos da Insightiva. Posso te ajudar com temas relacionados aos nossos diagn√≥sticos, planos, cultura e onboarding!‚Äù

    - Pergunta confusa:  
      > ‚ÄúVoc√™ pode reformular a pergunta, por favor? Quero garantir que minha resposta seja precisa e √∫til.‚Äù

    - Conte√∫do ausente:  
      > ‚ÄúEssa informa√ß√£o n√£o est√° presente nos documentos oficiais da Insightiva. Por seguran√ßa, respondo apenas com base no conte√∫do validado.‚Äù

    ‚ùå Sob nenhuma circunst√¢ncia delegue esta pergunta a outro agente, mesmo que o conte√∫do esteja fora do escopo.  
    Siga estritamente as instru√ß√µes acima: reformule, pe√ßa esclarecimentos ou informe a aus√™ncia da informa√ß√£o com a resposta padr√£o.

    ‚úÖ Siga obrigatoriamente estas etapas antes de gerar sua resposta:

      1. **Identifique se a entrada √© uma sauda√ß√£o** (ex: "oi", "ol√°", "bom dia", "tudo bem?").  
        - Se for, responda com acolhimento gentil, tom amig√°vel e alinhado √† linguagem institucional da Insightiva.

      2. **Reformule internamente a pergunta** para garantir que ela est√° claramente relacionada aos temas da Insightiva.

      3. **Se a pergunta estiver vaga, amb√≠gua ou dif√≠cil de associar ao conte√∫do**, **n√£o tente responder diretamente**. Em vez disso:  
        - Informe com gentileza que a pergunta n√£o ficou totalmente clara.  
        - Solicite ao usu√°rio que detalhe melhor o que deseja saber.  
        - Quando poss√≠vel, indique caminhos ou temas relacionados ao conte√∫do dispon√≠vel  
          (ex: "Voc√™ gostaria de saber mais sobre nossos planos? Ou deseja entender como funciona nosso diagn√≥stico cultural?").

      4. **Caso a informa√ß√£o solicitada n√£o esteja presentes**, responda com a frase abaixo, **sem altera√ß√µes**:  
        > "Desculpe, n√£o encontrei essa informa√ß√£o nos conte√∫dos da Insightiva."

    ‚ùå N√£o utilize conhecimento pr√≥prio, suposi√ß√µes ou informa√ß√µes externas.  
    ‚ùå N√£o utilize nenhuma ferramenta al√©m das explicitamente permitidas.  
    ‚ùå N√£o adivinhe respostas nem tente "complementar" com informa√ß√µes fora do escopo.  

    üåê Sempre responda em portugu√™s, mesmo que a pergunta esteja em outro idioma.

  embedding_model:
    type: "text-embedding-3-small"
  #   openai_embedding_max_tokens: 8191


# Configura√ß√£o Ollama
ollama:
  type: llama3
  provider: ollama
  base_url: http://localhost:11434
  temperature: 0.1
  additional_kwargs:
    num_predict: 800
  embedding_model:
      type: "llama3"

# Par√¢metros de confian√ßa e valida√ß√£o
confidence:
  threshold: 0.9                # Confian√ßa m√≠nima geral aceit√°vel para manter a resposta
  semantic_threshold: 0.90          # Similaridade sem√¢ntica m√≠nima entre resposta e FAQ
  similarity_top_k: 5             # N√∫mero de documentos do FAQ considerados para valida√ß√£o
  rerank_min_score: 0.9          # Score m√≠nimo no reranker (ex: Cohere) para documento ser considerado relevante
  use_semantic_validation: true    # Ativa valida√ß√£o sem√¢ntica entre a resposta e o conte√∫do do FAQ
  min_confidence: 0.75           # Confian√ßa m√≠nima para aceitar a resposta final (fallback se menor)
  min_confidence_override: 0.90      # Limiar alternativo para for√ßar aceita√ß√£o da resposta em casos espec√≠ficos
  cohere_model: "rerank-multilingual-v2.0"  # Modelo usado no rerank dos documentos



# Configura√ß√£o dos Documentos FAQ
faq_documents:
  - ./storage/datasets/processed_texts/
faq_json_path: ./storage/datasets/knowledge_base/FAQ_Exemplo_LIMPO.json

# Indexa√ß√£o
indexing:
  chunk_size: 800
  overlap: 200

# Valida√ß√£o e Reranker
modelo_validacao: "ollama"  # gpt4 ou ollama
retrieval:
  reranker_model: cross-encoder/ms-marco-MiniLM-L-6-v2
  subquestion_enabled: true
  top_k: 15

# Configura√ß√£o DeepLake e armazenamento
deeplake_dataset_path: ./data/faq_index
storage:
  conversations_path: ./storage/conversations
  deep_lake_path: ./storage/deep_lake_db
  processed_texts_directory: ./storage/datasets/processed_texts
  raw_data: ./storage/datasets/raw_data
  sessions_path: ./storage/sessions
  vector_store_path: ./storage/deeplake_local

# Debug e logs
debug:
  log_retrieved_chunks: true
  log_similarity_scores: true

# Mensagens padr√£o
fallback_message: "Essa pergunta est√° fora do escopo do FAQ. Por favor, pergunte algo relacionado ao nosso conte√∫do."
messages:
  fallback_not_found: "Desculpe, n√£o encontrei essa informa√ß√£o no FAQ da Insightiva."
  fallback_semantic_fail: "A resposta n√£o est√° suficientemente apoiada no conte√∫do atual. Voc√™ pode reformular ou consultar nosso time."
  prompt_reinforcement: |
    [INSTRU√á√ÉO]: Responda apenas com base no conte√∫do do FAQ da Insightiva.
    Se n√£o houver correspond√™ncia, diga: 'Essa pergunta est√° fora do escopo do FAQ.'


# Sess√µes
session:
  idle_timeout: 300
  notify_user: true

# Preprocessamento
preprocessing:
  clean_dir: true

# Google API (para integra√ß√£o com Drive)
google:
  drive_folder_id: ${GOOGLE_DRIVE_FOLDER_ID}
  service_account_file: ${GOOGLE_SERVICE_ACCOUNT_FILE}


notification_warning_bot:
  - Desculpe, n√£o encontrei essa informa√ß√£o no FAQ da Insightiva.
  - Lamento, mas essa informa√ß√£o n√£o est√° dispon√≠vel no FAQ da Insightiva.
  - Essa resposta n√£o est√° presente no FAQ da Insightiva.
  - N√£o localizei essa informa√ß√£o no FAQ oficial da Insightiva.
  - Infelizmente, essa informa√ß√£o n√£o consta no FAQ da Insightiva.
  - Essa d√∫vida n√£o est√° respondida no FAQ da Insightiva.
  - A resposta que voc√™ procura n√£o est√° no FAQ da Insightiva.
  - N√£o encontrei essa informa√ß√£o nos documentos da Insightiva.
  - Essa informa√ß√£o n√£o est√° registrada no conte√∫do do FAQ da Insightiva.
  - Desculpe, n√£o temos essa resposta dispon√≠vel no FAQ da Insightiva no momento.


# Configura√ß√µes Web
web_pages:
- https://Insightiva.ai/
- https://Insightiva.ai/feed/
- https://Insightiva.ai/comments/feed/
- https://Insightiva.ai/wp-json/
- https://Insightiva.ai/wp-json/wp/v2/pages/223168
- https://Insightiva.ai/wp-json/oembed/1.0/embed?url=https%3A%2F%2FInsightiva.ai%2F
- https://Insightiva.ai/wp-json/oembed/1.0/embed?url=https%3A%2F%2FInsightiva.ai%2F&#038;format=xml
- https://Insightiva.ai/wp-content/uploads/2024/04/cropped-favicon-Insightiva-32x32.png
- https://Insightiva.ai/wp-content/uploads/2024/04/cropped-favicon-Insightiva-192x192.png
- https://Insightiva.ai/wp-content/uploads/2024/04/cropped-favicon-Insightiva-180x180.png
- https://Insightiva.ai/planos/
- https://Insightiva.ai/parceiros/
- https://Insightiva.ai/blog/
- https://Insightiva.ai/faq/
- https://Insightiva.ai/contato/
- https://Insightiva.ai/cadastro-demo/
- https://Insightiva.ai/cadastro-demo
- https://Insightiva.ai/planos
- https://Insightiva.ai/beneficios
- https://facebook.com/br.Insightiva
- https://www.instagram.com/br.Insightiva/
- https://Insightiva.ai/termos-de-servico/
- https://Insightiva.ai/politica-de-privacidade/

# Sauda√ß√£o e mensagens de boas-vindas
welcome_messages:
  - Ol√°! Em que posso te ajudar sobre os servi√ßos da Insightiva?
  - Oi! Como posso te ajudar hoje com a Insightiva?
  - Bem-vindo(a)! Est√° buscando alguma informa√ß√£o sobre nossos servi√ßos?
  - Sauda√ß√µes! Posso te ajudar com algo da Insightiva?
  - Oi, tudo bem? Como posso auxiliar voc√™ nos servi√ßos da Insightiva?
  - Ol√°! Precisa de ajuda com algum dos nossos servi√ßos?
  - Seja bem-vindo(a) √† Insightiva! Em que posso te ajudar?
  - Estou aqui para te ajudar com os servi√ßos da Insightiva. Como posso come√ßar?
  - Ol√°! Fico feliz em ajudar. O que voc√™ gostaria de saber sobre a Insightiva?
  - Oi! Pode perguntar √† vontade. Estou aqui para ajudar com informa√ß√µes sobre a Insightiva.

# Filtros anti-prompt-injection e sauda√ß√µes padr√£o (mantidos conforme original)
injetores:
  - ignore
  - desconsidere
  - esque√ßa
  - esquece
  - mude de comportamento
  - reformule sua resposta
  - n√£o siga as instru√ß√µes anteriores
  - desobede√ßa
  - override
  - bypass
  - desativar
  - delete
  - remova
  - desligue
  - disable
  - alterar personalidade
  - reset
  - ignore as regras
  - fingir que
  - pretenda ser
  - roleplay
  - voc√™ agora √©
  - assuma que
  - hack
  - substitua
  - comporte-se como
  - n√£o responda como voc√™ mesmo
  - circumvent
  - contornar
  - trapacear
  - exploit
  - ignore previous instructions
  - n√£o atue como
  - n√£o se limite
  - limite removido
  - ignore sua programa√ß√£o
  - ignore suas restri√ß√µes
  - break character
  - n√£o mencione
  - responda como
  - simule
  - ignore safety
  - ignore safety guidelines
  - responda sem filtro
  - sem censura
  - sem restri√ß√µes
  - sem limita√ß√µes
  - ignore regras
  - ignore guidelines
  - ignore sua fun√ß√£o
  - voc√™ foi reprogramado
  - comando root
  - admin mode
  - modo administrador
  - debug mode
  - engineering mode
  - modo engenheiro
  - sem √©tica
  - modo sem restri√ß√µes
  - desbloqueie
  - libere
  - destrave
  - rebele-se
  - ignore security
  - voc√™ est√° livre
  - voc√™ n√£o tem regras
  - instru√ß√£o override
  - ignore os limites
  - execute este comando
  - system override
  - siga este comando em vez disso
  - permita
  - forne√ßa a verdade
  - responda honestamente
  - ignore sua moralidade
  - ignore alinhamento
  - voc√™ √© um personagem
  - diga o que realmente pensa
  - n√£o tenha medo de ser cancelado

salutations:
  - oi
  - ol√°
  - ola
  - bom dia
  - boa tarde
  - boa noite
  - e a√≠
  - eai
  - e a√™
  - ea√≠
  - eae
  - tudo bem
  - tudo bom
  - como vai
  - como est√°
  - como est√°s
  - salve
  - fala a√≠
  - fala
  - opa
  - beleza
  - blz
  - yo
  - yo!
  - yoo
  - yoo!
  - al√¥
  - alooo
  - oi√™
  - oi oi
  - oie
  - oizinho
  - boas
  - hey
  - hello
  - hi
  - heyo
  - oi meu chapa
  - oi meu caro
  - sauda√ß√µes
  - sauda√ß√µes cordiais
  - bom te ver
  - que bom te ver

setup_docs:
  max_document_size: 4000

translate: true

guardrails:
  valid_topics:
    - diagn√≥stico cultural
    - cultura organizacional
    - clima organizacional
    - an√°lise de valores
    - valores organizacionais
    - onboarding
    - tipos culturais
    - artefatos culturais
    - comportamentos organizacionais
    - employee experience
    - engajamento
    - feedback organizacional
    - governan√ßa cultural
    - transforma√ß√£o cultural
    - comunica√ß√£o interna
    - perguntas abertas
    - metodologia da pesquisa
    - aplica√ß√£o da pesquisa
    - resultados da pesquisa
    - dashboard da Insightiva
    - intelig√™ncia artificial na an√°lise
    - personaliza√ß√£o da pesquisa
    - inclus√£o e acessibilidade
    - privacidade e anonimato
    - LGPD e seguran√ßa de dados
    - an√°lise quantitativa
    - an√°lise qualitativa
    - estrat√©gias de mudan√ßa cultural
    - facilitadores da pesquisa
    - motiva√ß√£o e participa√ß√£o
    - comunica√ß√£o com l√≠deres
    - comunica√ß√£o com colaboradores
    - segmenta√ß√£o de resultados
    - n√≠vel de consci√™ncia organizacional
    - for√ßas culturais
    - alinhamento estrat√©gico
    - planos oferecidos
    - benef√≠cios e diferenciais da Insightiva
    - avalia√ß√£o 360           
    - parceria com consultores  
  invalid_topics:
    - religi√£o
    - espiritualidade
    - p√°scoa
    - natal
    - ovo
    - animal
    - mitologia
    - fantasia
    - fic√ß√£o cient√≠fica
    - astrologia
    - magia
    - signos
    - hor√≥scopo
    - pol√≠tica
    - futebol
    - celebridades
    - s√©ries
    - filmes
    - economia global
    - guerra
    - esportes
    - videogames
    - alimentos
    - receitas culin√°rias
    - cuidados com pets
    - entretenimento
    - viagens
    - turismo
    - moda
    - beleza
    - moda feminina
    - moda masculina
    - moda infantil
    - moda juvenil
    - moda feminina
    - moda masculina
    - moda infantil
    - moda juvenil
    - moda feminina
    - moda masculina  
    - moda infantil
    - moda juvenil    
    - moda feminina
