# ============================================================================
# Kubernetes Secret - Sensitive Data
# ============================================================================
# Dados sensíveis (passwords, tokens, API keys)
#
# IMPORTANTE: NÃO commitar secrets reais no Git!
# Este é apenas um template de exemplo.
#
# Em produção, usar:
#   - kubectl create secret
#   - Vault (HashiCorp)
#   - External Secrets Operator
#   - Cloud provider secret manager (AWS Secrets Manager, etc)
# ============================================================================

apiVersion: v1
kind: Secret
metadata:
  name: wine-quality-secrets
  namespace: default
  labels:
    app: wine-quality-api

type: Opaque

# --------------------------------------------------------------------------
# Secrets em base64
# --------------------------------------------------------------------------
# Para encodar: echo -n "value" | base64
# Para decodar: echo "encoded" | base64 -d
data:
  # MLflow tracking token (exemplo)
  mlflow-token: bWxmbG93LXRva2VuLWV4YW1wbGU=  # mlflow-token-example
  
  # DVC remote credentials (exemplo)
  dvc-aws-access-key: YXdzLWFjY2Vzcy1rZXk=      # aws-access-key
  dvc-aws-secret-key: YXdzLXNlY3JldC1rZXk=      # aws-secret-key
  
  # API key para autenticação (exemplo)
  api-key: c3VwZXItc2VjcmV0LWFwaS1rZXk=          # super-secret-api-key

# ============================================================================
# CRIAÇÃO DE SECRETS
# ============================================================================
#
# Método 1: Imperativo (recomendado para produção)
# -------------------------------------------------
# kubectl create secret generic wine-quality-secrets \
#   --from-literal=mlflow-token=<real-token> \
#   --from-literal=api-key=<real-api-key>
#
# Método 2: From file
# --------------------
# kubectl create secret generic wine-quality-secrets \
#   --from-file=mlflow-token=./mlflow-token.txt \
#   --from-file=api-key=./api-key.txt
#
# Método 3: External Secrets (produção enterprise)
# -------------------------------------------------
# Usar External Secrets Operator para sincronizar do Vault/AWS Secrets Manager
#
# ============================================================================
# USO NO DEPLOYMENT
# ============================================================================
#
# env:
# - name: MLFLOW_TOKEN
#   valueFrom:
#     secretKeyRef:
#       name: wine-quality-secrets
#       key: mlflow-token
#
# Ou montar como arquivo:
#
# volumes:
# - name: secret-volume
#   secret:
#     secretName: wine-quality-secrets
#
# volumeMounts:
# - name: secret-volume
#   mountPath: /app/secrets
#   readOnly: true
#
# ============================================================================